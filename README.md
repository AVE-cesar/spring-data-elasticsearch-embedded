This java maven project gives you an example on how you can use Spring-data-elasticsearch in an embedded way.

Spring-data-elasticsearch version 2.1.0
ElasticSearch version 6.2.4

